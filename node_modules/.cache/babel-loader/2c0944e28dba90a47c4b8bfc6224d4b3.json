{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jison\\\\OneDrive\\\\Desktop\\\\digital-e-gram-panchayat\\\\src\\\\components\\\\ViewApp.js\";\n// src/components/ViewApp.js\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { doc, getDoc, addDoc, collection, serverTimestamp, setDoc } from 'firebase/firestore';\nimport { db } from '../firebase';\nfunction ViewApp() {\n  var _applicationData$time;\n  const {\n    state\n  } = useLocation();\n  const navigate = useNavigate();\n  const {\n    appliedId,\n    staff\n  } = state || {};\n  const [applicationData, setApplicationData] = useState(null);\n  useEffect(() => {\n    const fetchApplication = async () => {\n      if (!appliedId || !staff) {\n        alert('Invalid access');\n        navigate('/staff-dashboard');\n        return;\n      }\n      const appliedRef = doc(db, 'Applied', appliedId);\n      const appliedSnap = await getDoc(appliedRef);\n      if (!appliedSnap.exists()) {\n        alert('Application not found');\n        return;\n      }\n      const appliedData = appliedSnap.data();\n      const applicationRef = doc(db, 'applications', appliedData.applicationId);\n      const applicationSnap = await getDoc(applicationRef);\n      const userRef = doc(db, 'users', appliedData.userId);\n      const userSnap = await getDoc(userRef);\n      setApplicationData({\n        appliedId,\n        ...appliedData,\n        applicationName: applicationSnap.data().name,\n        userInfo: userSnap.data()\n      });\n    };\n    fetchApplication();\n  }, [appliedId, staff, navigate]);\n  const handleDecision = async decision => {\n    try {\n      const checkedRef = doc(db, 'CheckedApp', appliedId);\n      await setDoc(checkedRef, {\n        appliedId,\n        staffId: staff.uid,\n        status: decision,\n        timestamp: serverTimestamp()\n      });\n      alert(`Application ${decision}`);\n      navigate('/staff-dashboard', {\n        state: {\n          staff\n        }\n      });\n    } catch (err) {\n      console.error(err);\n      alert('Failed to update decision');\n    }\n  };\n  if (!applicationData) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 32\n    }\n  }, \"Loading application...\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '20px',\n      maxWidth: '800px',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, \"Application: \", applicationData.applicationName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 10\n    }\n  }, \"Category:\"), \" \", applicationData.category), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 10\n    }\n  }, \"User:\"), \" \", applicationData.userInfo.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 10\n    }\n  }, \"Phone:\"), \" \", applicationData.userInfo.phone), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 10\n    }\n  }, \"Email:\"), \" \", applicationData.userInfo.email), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 10\n    }\n  }, \"Message:\"), \" \", applicationData.message), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 10\n    }\n  }, \"Applied On:\"), \" \", new Date((_applicationData$time = applicationData.timestamp) === null || _applicationData$time === void 0 ? void 0 : _applicationData$time.toDate()).toLocaleString()), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDecision('accepted'),\n    style: {\n      marginRight: '10px',\n      backgroundColor: 'green',\n      color: 'white',\n      padding: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Accept\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDecision('rejected'),\n    style: {\n      backgroundColor: 'red',\n      color: 'white',\n      padding: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Reject\")), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => navigate('/staff-dashboard', {\n      state: {\n        staff\n      }\n    }),\n    style: {\n      marginTop: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"Back to Dashboard\"));\n}\nexport default ViewApp;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","doc","getDoc","addDoc","collection","serverTimestamp","setDoc","db","ViewApp","_applicationData$time","state","navigate","appliedId","staff","applicationData","setApplicationData","fetchApplication","alert","appliedRef","appliedSnap","exists","appliedData","data","applicationRef","applicationId","applicationSnap","userRef","userId","userSnap","applicationName","name","userInfo","handleDecision","decision","checkedRef","staffId","uid","status","timestamp","err","console","error","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","maxWidth","margin","category","phone","email","message","Date","toDate","toLocaleString","marginTop","onClick","marginRight","backgroundColor","color"],"sources":["C:/Users/jison/OneDrive/Desktop/digital-e-gram-panchayat/src/components/ViewApp.js"],"sourcesContent":["// src/components/ViewApp.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { doc, getDoc, addDoc, collection, serverTimestamp, setDoc } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\n\r\nfunction ViewApp() {\r\n  const { state } = useLocation();\r\n  const navigate = useNavigate();\r\n  const { appliedId, staff } = state || {};\r\n\r\n  const [applicationData, setApplicationData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchApplication = async () => {\r\n      if (!appliedId || !staff) {\r\n        alert('Invalid access');\r\n        navigate('/staff-dashboard');\r\n        return;\r\n      }\r\n\r\n      const appliedRef = doc(db, 'Applied', appliedId);\r\n      const appliedSnap = await getDoc(appliedRef);\r\n      if (!appliedSnap.exists()) {\r\n        alert('Application not found');\r\n        return;\r\n      }\r\n\r\n      const appliedData = appliedSnap.data();\r\n      const applicationRef = doc(db, 'applications', appliedData.applicationId);\r\n      const applicationSnap = await getDoc(applicationRef);\r\n\r\n      const userRef = doc(db, 'users', appliedData.userId);\r\n      const userSnap = await getDoc(userRef);\r\n\r\n      setApplicationData({\r\n        appliedId,\r\n        ...appliedData,\r\n        applicationName: applicationSnap.data().name,\r\n        userInfo: userSnap.data()\r\n      });\r\n    };\r\n\r\n    fetchApplication();\r\n  }, [appliedId, staff, navigate]);\r\n\r\n  const handleDecision = async (decision) => {\r\n    try {\r\n      const checkedRef = doc(db, 'CheckedApp', appliedId);\r\n      await setDoc(checkedRef, {\r\n        appliedId,\r\n        staffId: staff.uid,\r\n        status: decision,\r\n        timestamp: serverTimestamp()\r\n      });\r\n\r\n      alert(`Application ${decision}`);\r\n      navigate('/staff-dashboard', { state: { staff } });\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Failed to update decision');\r\n    }\r\n  };\r\n\r\n  if (!applicationData) return <p>Loading application...</p>;\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '800px', margin: 'auto' }}>\r\n      <h2>Application: {applicationData.applicationName}</h2>\r\n      <p><strong>Category:</strong> {applicationData.category}</p>\r\n      <p><strong>User:</strong> {applicationData.userInfo.name}</p>\r\n      <p><strong>Phone:</strong> {applicationData.userInfo.phone}</p>\r\n      <p><strong>Email:</strong> {applicationData.userInfo.email}</p>\r\n      <p><strong>Message:</strong> {applicationData.message}</p>\r\n      <p><strong>Applied On:</strong> {new Date(applicationData.timestamp?.toDate()).toLocaleString()}</p>\r\n\r\n      <div style={{ marginTop: '20px' }}>\r\n        <button onClick={() => handleDecision('accepted')} style={{ marginRight: '10px', backgroundColor: 'green', color: 'white', padding: '10px' }}>Accept</button>\r\n        <button onClick={() => handleDecision('rejected')} style={{ backgroundColor: 'red', color: 'white', padding: '10px' }}>Reject</button>\r\n      </div>\r\n\r\n      <button onClick={() => navigate('/staff-dashboard', { state: { staff } })} style={{ marginTop: '20px' }}>\r\n        Back to Dashboard\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewApp;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}