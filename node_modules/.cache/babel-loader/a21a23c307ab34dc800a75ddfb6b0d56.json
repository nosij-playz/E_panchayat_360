{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jison\\\\OneDrive\\\\Desktop\\\\digital-e-gram-panchayat\\\\src\\\\components\\\\CheckStatus.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../firebase';\nfunction CheckStatus() {\n  var _location$state, _location$state2;\n  const location = useLocation();\n  const userId = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.user;\n  const applicationId = (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.applicationId;\n  const [status, setStatus] = useState('Fetching...');\n  const [application, setApplication] = useState(null);\n  useEffect(() => {\n    const fetchStatus = async () => {\n      try {\n        // Step 1: Get all Applied documents\n        const appliedSnap = await getDocs(collection(db, 'Applied'));\n        const appliedList = appliedSnap.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        })).filter(app => app.userId === userId && app.id === applicationId);\n        if (appliedList.length === 0) {\n          setStatus('Application not found.');\n          return;\n        }\n        const appliedApp = appliedList[0];\n        setApplication(appliedApp);\n\n        // Step 2: Check if it's been verified in CheckedApp\n        const checkedSnap = await getDocs(collection(db, 'CheckedApp'));\n        const checkedList = checkedSnap.docs.map(doc => doc.data());\n        const checked = checkedList.find(c => c.appliedId === appliedApp.id);\n        if (checked) {\n          if (checked.status === 'Confirmed') {\n            setStatus('‚úÖ Verified (Approved)');\n          } else if (checked.status === 'Rechecked') {\n            setStatus('‚ö†Ô∏è Forwarded for Rechecking');\n          } else {\n            setStatus('‚è≥ Under Review');\n          }\n        } else {\n          // Fallback to verify field if not in CheckedApp\n          const verify = appliedApp.verify;\n          if (verify === true || verify === 'confirmed') {\n            setStatus('‚úÖ Verified');\n          } else if (verify === 'rechecked') {\n            setStatus('‚ö†Ô∏è Forwarded for Rechecking');\n          } else {\n            setStatus('üïì Applied');\n          }\n        }\n      } catch (error) {\n        console.error('Error:', error);\n        setStatus('Error retrieving status.');\n      }\n    };\n    if (userId && applicationId) {\n      fetchStatus();\n    } else {\n      setStatus('Invalid data passed.');\n    }\n  }, [userId, applicationId]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '20px',\n      maxWidth: '600px',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"Application Status\"), application ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: '#f2f2f2',\n      padding: '20px',\n      borderRadius: '8px',\n      border: '1px solid #ccc'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 14\n    }\n  }, \"Name:\"), \" \", application.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 14\n    }\n  }, \"Application ID:\"), \" \", application.id), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 14\n    }\n  }, \"Status:\"), \" \", status)) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, status));\n}\nexport default CheckStatus;","map":{"version":3,"names":["React","useEffect","useState","useLocation","collection","getDocs","db","CheckStatus","_location$state","_location$state2","location","userId","state","user","applicationId","status","setStatus","application","setApplication","fetchStatus","appliedSnap","appliedList","docs","map","doc","id","data","filter","app","length","appliedApp","checkedSnap","checkedList","checked","find","c","appliedId","verify","error","console","createElement","style","padding","maxWidth","margin","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","borderRadius","border","name"],"sources":["C:/Users/jison/OneDrive/Desktop/digital-e-gram-panchayat/src/components/CheckStatus.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { collection, getDocs } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\n\r\nfunction CheckStatus() {\r\n  const location = useLocation();\r\n  const userId = location.state?.user;\r\n  const applicationId = location.state?.applicationId;\r\n\r\n  const [status, setStatus] = useState('Fetching...');\r\n  const [application, setApplication] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchStatus = async () => {\r\n      try {\r\n        // Step 1: Get all Applied documents\r\n        const appliedSnap = await getDocs(collection(db, 'Applied'));\r\n        const appliedList = appliedSnap.docs\r\n          .map(doc => ({ id: doc.id, ...doc.data() }))\r\n          .filter(app => app.userId === userId && app.id === applicationId);\r\n\r\n        if (appliedList.length === 0) {\r\n          setStatus('Application not found.');\r\n          return;\r\n        }\r\n\r\n        const appliedApp = appliedList[0];\r\n        setApplication(appliedApp);\r\n\r\n        // Step 2: Check if it's been verified in CheckedApp\r\n        const checkedSnap = await getDocs(collection(db, 'CheckedApp'));\r\n        const checkedList = checkedSnap.docs.map(doc => doc.data());\r\n\r\n        const checked = checkedList.find(c => c.appliedId === appliedApp.id);\r\n\r\n        if (checked) {\r\n          if (checked.status === 'Confirmed') {\r\n            setStatus('‚úÖ Verified (Approved)');\r\n          } else if (checked.status === 'Rechecked') {\r\n            setStatus('‚ö†Ô∏è Forwarded for Rechecking');\r\n          } else {\r\n            setStatus('‚è≥ Under Review');\r\n          }\r\n        } else {\r\n          // Fallback to verify field if not in CheckedApp\r\n          const verify = appliedApp.verify;\r\n          if (verify === true || verify === 'confirmed') {\r\n            setStatus('‚úÖ Verified');\r\n          } else if (verify === 'rechecked') {\r\n            setStatus('‚ö†Ô∏è Forwarded for Rechecking');\r\n          } else {\r\n            setStatus('üïì Applied');\r\n          }\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        setStatus('Error retrieving status.');\r\n      }\r\n    };\r\n\r\n    if (userId && applicationId) {\r\n      fetchStatus();\r\n    } else {\r\n      setStatus('Invalid data passed.');\r\n    }\r\n  }, [userId, applicationId]);\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '600px', margin: 'auto' }}>\r\n      <h2>Application Status</h2>\r\n      {application ? (\r\n        <div style={{\r\n          backgroundColor: '#f2f2f2',\r\n          padding: '20px',\r\n          borderRadius: '8px',\r\n          border: '1px solid #ccc'\r\n        }}>\r\n          <p><strong>Name:</strong> {application.name}</p>\r\n          <p><strong>Application ID:</strong> {application.id}</p>\r\n          <p><strong>Status:</strong> {status}</p>\r\n        </div>\r\n      ) : (\r\n        <p>{status}</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckStatus;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}