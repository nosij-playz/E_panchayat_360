{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jison\\\\OneDrive\\\\Desktop\\\\digital-e-gram-panchayat\\\\src\\\\components\\\\AdminManageBanners.js\";\nimport React, { useState, useEffect } from 'react';\nimport { db, storage } from '../firebase';\nimport { collection, addDoc, onSnapshot, query, orderBy } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nfunction AdminManageBanners() {\n  const [message, setMessage] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const [banners, setBanners] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const handleUpload = async () => {\n    if (!imageFile || !message.trim()) {\n      alert('Please provide both an image and a message.');\n      return;\n    }\n    setLoading(true);\n    try {\n      // Upload image to Firebase Storage\n      const storageRef = ref(storage, `banners/${Date.now()}-${imageFile.name}`);\n      await uploadBytes(storageRef, imageFile);\n\n      // Get download URL\n      const downloadURL = await getDownloadURL(storageRef);\n\n      // Save banner data to Firestore\n      await addDoc(collection(db, 'banners'), {\n        message: message.trim(),\n        imageUrl: downloadURL,\n        timestamp: Date.now()\n      });\n\n      // Clear form\n      setMessage('');\n      setImageFile(null);\n      alert('Banner uploaded successfully!');\n    } catch (error) {\n      console.error('Upload Error:', error);\n      alert('An error occurred while uploading the banner.');\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    const q = query(collection(db, 'banners'), orderBy('timestamp', 'desc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const bannerList = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setBanners(bannerList);\n    });\n    return () => unsubscribe();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '20px',\n      maxWidth: '700px',\n      margin: '0 auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      marginBottom: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, \"Manage Banners\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: e => setImageFile(e.target.files[0]),\n    style: {\n      marginBottom: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"Enter banner message\",\n    value: message,\n    onChange: e => setMessage(e.target.value),\n    rows: 3,\n    style: {\n      width: '100%',\n      marginBottom: '10px',\n      padding: '8px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    disabled: loading,\n    style: {\n      padding: '10px 20px',\n      cursor: loading ? 'not-allowed' : 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, loading ? 'Uploading...' : 'Upload Banner'), /*#__PURE__*/React.createElement(\"hr\", {\n    style: {\n      margin: '30px 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, \"Uploaded Banners\"), banners.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 32\n    }\n  }, \"No banners uploaded yet.\"), banners.map(banner => /*#__PURE__*/React.createElement(\"div\", {\n    key: banner.id,\n    style: {\n      marginBottom: '25px',\n      border: '1px solid #ccc',\n      borderRadius: '8px',\n      padding: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: banner.imageUrl,\n    alt: \"Banner\",\n    style: {\n      width: '100%',\n      maxHeight: '300px',\n      objectFit: 'cover',\n      borderRadius: '6px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginTop: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 44\n    }\n  }, \"Message:\"), \" \", banner.message))));\n}\nexport default AdminManageBanners;","map":{"version":3,"names":["React","useState","useEffect","db","storage","collection","addDoc","onSnapshot","query","orderBy","ref","uploadBytes","getDownloadURL","AdminManageBanners","message","setMessage","imageFile","setImageFile","banners","setBanners","loading","setLoading","handleUpload","trim","alert","storageRef","Date","now","name","downloadURL","imageUrl","timestamp","error","console","q","unsubscribe","snapshot","bannerList","docs","map","doc","id","data","createElement","style","padding","maxWidth","margin","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","type","accept","onChange","e","target","files","placeholder","value","rows","width","onClick","disabled","cursor","length","banner","key","border","borderRadius","src","alt","maxHeight","objectFit","marginTop"],"sources":["C:/Users/jison/OneDrive/Desktop/digital-e-gram-panchayat/src/components/AdminManageBanners.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db, storage } from '../firebase';\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  onSnapshot,\r\n  query,\r\n  orderBy\r\n} from 'firebase/firestore';\r\nimport {\r\n  ref,\r\n  uploadBytes,\r\n  getDownloadURL\r\n} from 'firebase/storage';\r\n\r\nfunction AdminManageBanners() {\r\n  const [message, setMessage] = useState('');\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [banners, setBanners] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleUpload = async () => {\r\n    if (!imageFile || !message.trim()) {\r\n      alert('Please provide both an image and a message.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Upload image to Firebase Storage\r\n      const storageRef = ref(storage, `banners/${Date.now()}-${imageFile.name}`);\r\n      await uploadBytes(storageRef, imageFile);\r\n\r\n      // Get download URL\r\n      const downloadURL = await getDownloadURL(storageRef);\r\n\r\n      // Save banner data to Firestore\r\n      await addDoc(collection(db, 'banners'), {\r\n        message: message.trim(),\r\n        imageUrl: downloadURL,\r\n        timestamp: Date.now()\r\n      });\r\n\r\n      // Clear form\r\n      setMessage('');\r\n      setImageFile(null);\r\n      alert('Banner uploaded successfully!');\r\n    } catch (error) {\r\n      console.error('Upload Error:', error);\r\n      alert('An error occurred while uploading the banner.');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const q = query(collection(db, 'banners'), orderBy('timestamp', 'desc'));\r\n\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const bannerList = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      }));\r\n      setBanners(bannerList);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '700px', margin: '0 auto' }}>\r\n      <h2 style={{ marginBottom: '20px' }}>Manage Banners</h2>\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={(e) => setImageFile(e.target.files[0])}\r\n        style={{ marginBottom: '10px' }}\r\n      />\r\n      <textarea\r\n        placeholder=\"Enter banner message\"\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        rows={3}\r\n        style={{ width: '100%', marginBottom: '10px', padding: '8px' }}\r\n      />\r\n      <button\r\n        onClick={handleUpload}\r\n        disabled={loading}\r\n        style={{ padding: '10px 20px', cursor: loading ? 'not-allowed' : 'pointer' }}\r\n      >\r\n        {loading ? 'Uploading...' : 'Upload Banner'}\r\n      </button>\r\n\r\n      <hr style={{ margin: '30px 0' }} />\r\n\r\n      <h3>Uploaded Banners</h3>\r\n      {banners.length === 0 && <p>No banners uploaded yet.</p>}\r\n      {banners.map((banner) => (\r\n        <div key={banner.id} style={{ marginBottom: '25px', border: '1px solid #ccc', borderRadius: '8px', padding: '10px' }}>\r\n          <img\r\n            src={banner.imageUrl}\r\n            alt=\"Banner\"\r\n            style={{ width: '100%', maxHeight: '300px', objectFit: 'cover', borderRadius: '6px' }}\r\n          />\r\n          <p style={{ marginTop: '10px' }}><strong>Message:</strong> {banner.message}</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminManageBanners;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}