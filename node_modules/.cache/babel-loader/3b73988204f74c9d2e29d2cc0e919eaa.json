{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jison\\\\OneDrive\\\\Desktop\\\\digital-e-gram-panchayat\\\\src\\\\components\\\\AdminManageBanners.js\";\nimport React, { useState, useEffect } from 'react';\nimport { db } from '../firebase';\nimport { collection, addDoc, onSnapshot, query, orderBy } from 'firebase/firestore';\nfunction AdminManageBanners() {\n  const [message, setMessage] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const [banners, setBanners] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const handleUpload = async () => {\n    if (!imageFile || !message.trim()) {\n      alert('Please provide both an image and a message.');\n      return;\n    }\n    const imageName = imageFile.name;\n\n    // Instruct admin to move the image manually\n    alert(`Please move the image \"${imageName}\" to the public/Banner folder.`);\n    setLoading(true);\n    try {\n      await addDoc(collection(db, 'banners'), {\n        message: message.trim(),\n        imageUrl: `/Banner/${imageName}`,\n        timestamp: Date.now()\n      });\n      setMessage('');\n      setImageFile(null);\n      alert('Banner info uploaded. Now manually move image to public/Banner/');\n    } catch (error) {\n      console.error('Firestore Error:', error);\n      alert('An error occurred while saving the banner info.');\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    const q = query(collection(db, 'banners'), orderBy('timestamp', 'desc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const bannerList = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setBanners(bannerList);\n    });\n    return () => unsubscribe();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '20px',\n      maxWidth: '700px',\n      margin: '0 auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"Manage Banners (Local)\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: e => setImageFile(e.target.files[0]),\n    style: {\n      marginBottom: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"Enter banner message\",\n    value: message,\n    onChange: e => setMessage(e.target.value),\n    rows: 3,\n    style: {\n      width: '100%',\n      marginBottom: '10px',\n      padding: '8px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    disabled: loading,\n    style: {\n      padding: '10px 20px',\n      cursor: loading ? 'not-allowed' : 'pointer',\n      backgroundColor: '#1976d2',\n      color: 'white',\n      border: 'none',\n      borderRadius: '4px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, loading ? 'Uploading...' : 'Save Banner Info'), /*#__PURE__*/React.createElement(\"hr\", {\n    style: {\n      margin: '30px 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, \"Uploaded Banners\"), banners.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 32\n    }\n  }, \"No banners uploaded yet.\"), banners.map(banner => /*#__PURE__*/React.createElement(\"div\", {\n    key: banner.id,\n    style: {\n      marginBottom: '25px',\n      border: '1px solid #ccc',\n      borderRadius: '8px',\n      padding: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: banner.imageUrl,\n    alt: \"Banner\",\n    style: {\n      width: '100%',\n      maxHeight: '300px',\n      objectFit: 'cover',\n      borderRadius: '6px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginTop: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, \"Message:\"), \" \", banner.message))));\n}\nexport default AdminManageBanners;","map":{"version":3,"names":["React","useState","useEffect","db","collection","addDoc","onSnapshot","query","orderBy","AdminManageBanners","message","setMessage","imageFile","setImageFile","banners","setBanners","loading","setLoading","handleUpload","trim","alert","imageName","name","imageUrl","timestamp","Date","now","error","console","q","unsubscribe","snapshot","bannerList","docs","map","doc","id","data","createElement","style","padding","maxWidth","margin","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","e","target","files","marginBottom","placeholder","value","rows","width","onClick","disabled","cursor","backgroundColor","color","border","borderRadius","length","banner","key","src","alt","maxHeight","objectFit","marginTop"],"sources":["C:/Users/jison/OneDrive/Desktop/digital-e-gram-panchayat/src/components/AdminManageBanners.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db } from '../firebase';\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  onSnapshot,\r\n  query,\r\n  orderBy\r\n} from 'firebase/firestore';\r\n\r\nfunction AdminManageBanners() {\r\n  const [message, setMessage] = useState('');\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [banners, setBanners] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleUpload = async () => {\r\n    if (!imageFile || !message.trim()) {\r\n      alert('Please provide both an image and a message.');\r\n      return;\r\n    }\r\n\r\n    const imageName = imageFile.name;\r\n\r\n    // Instruct admin to move the image manually\r\n    alert(`Please move the image \"${imageName}\" to the public/Banner folder.`);\r\n\r\n    setLoading(true);\r\n    try {\r\n      await addDoc(collection(db, 'banners'), {\r\n        message: message.trim(),\r\n        imageUrl: `/Banner/${imageName}`,\r\n        timestamp: Date.now()\r\n      });\r\n\r\n      setMessage('');\r\n      setImageFile(null);\r\n      alert('Banner info uploaded. Now manually move image to public/Banner/');\r\n    } catch (error) {\r\n      console.error('Firestore Error:', error);\r\n      alert('An error occurred while saving the banner info.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const q = query(collection(db, 'banners'), orderBy('timestamp', 'desc'));\r\n\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const bannerList = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      }));\r\n      setBanners(bannerList);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '700px', margin: '0 auto' }}>\r\n      <h2>Manage Banners (Local)</h2>\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={(e) => setImageFile(e.target.files[0])}\r\n        style={{ marginBottom: '10px' }}\r\n      />\r\n      <textarea\r\n        placeholder=\"Enter banner message\"\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        rows={3}\r\n        style={{ width: '100%', marginBottom: '10px', padding: '8px' }}\r\n      />\r\n      <button\r\n        onClick={handleUpload}\r\n        disabled={loading}\r\n        style={{\r\n          padding: '10px 20px',\r\n          cursor: loading ? 'not-allowed' : 'pointer',\r\n          backgroundColor: '#1976d2',\r\n          color: 'white',\r\n          border: 'none',\r\n          borderRadius: '4px'\r\n        }}\r\n      >\r\n        {loading ? 'Uploading...' : 'Save Banner Info'}\r\n      </button>\r\n\r\n      <hr style={{ margin: '30px 0' }} />\r\n\r\n      <h3>Uploaded Banners</h3>\r\n      {banners.length === 0 && <p>No banners uploaded yet.</p>}\r\n      {banners.map((banner) => (\r\n        <div key={banner.id} style={{\r\n          marginBottom: '25px',\r\n          border: '1px solid #ccc',\r\n          borderRadius: '8px',\r\n          padding: '10px'\r\n        }}>\r\n          <img\r\n            src={banner.imageUrl}\r\n            alt=\"Banner\"\r\n            style={{\r\n              width: '100%',\r\n              maxHeight: '300px',\r\n              objectFit: 'cover',\r\n              borderRadius: '6px'\r\n            }}\r\n          />\r\n          <p style={{ marginTop: '10px' }}>\r\n            <strong>Message:</strong> {banner.message}\r\n          </p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminManageBanners;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,EAAE,QAAQ,aAAa;AAChC,SACEC,UAAU,EACVC,MAAM,EACNC,UAAU,EACVC,KAAK,EACLC,OAAO,QACF,oBAAoB;AAE3B,SAASC,kBAAkBA,CAAA,EAAG;EAC5B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMiB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACN,SAAS,IAAI,CAACF,OAAO,CAACS,IAAI,CAAC,CAAC,EAAE;MACjCC,KAAK,CAAC,6CAA6C,CAAC;MACpD;IACF;IAEA,MAAMC,SAAS,GAAGT,SAAS,CAACU,IAAI;;IAEhC;IACAF,KAAK,CAAC,0BAA0BC,SAAS,gCAAgC,CAAC;IAE1EJ,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMZ,MAAM,CAACD,UAAU,CAACD,EAAE,EAAE,SAAS,CAAC,EAAE;QACtCO,OAAO,EAAEA,OAAO,CAACS,IAAI,CAAC,CAAC;QACvBI,QAAQ,EAAE,WAAWF,SAAS,EAAE;QAChCG,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;MACtB,CAAC,CAAC;MAEFf,UAAU,CAAC,EAAE,CAAC;MACdE,YAAY,CAAC,IAAI,CAAC;MAClBO,KAAK,CAAC,iEAAiE,CAAC;IAC1E,CAAC,CAAC,OAAOO,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MACxCP,KAAK,CAAC,iDAAiD,CAAC;IAC1D;IACAH,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;EAEDf,SAAS,CAAC,MAAM;IACd,MAAM2B,CAAC,GAAGtB,KAAK,CAACH,UAAU,CAACD,EAAE,EAAE,SAAS,CAAC,EAAEK,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;IAExE,MAAMsB,WAAW,GAAGxB,UAAU,CAACuB,CAAC,EAAGE,QAAQ,IAAK;MAC9C,MAAMC,UAAU,GAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAACC,GAAG,KAAK;QAC3CC,EAAE,EAAED,GAAG,CAACC,EAAE;QACV,GAAGD,GAAG,CAACE,IAAI,CAAC;MACd,CAAC,CAAC,CAAC;MACHtB,UAAU,CAACiB,UAAU,CAAC;IACxB,CAAC,CAAC;IAEF,OAAO,MAAMF,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE9B,KAAA,CAAAsC,aAAA;IAAKC,KAAK,EAAE;MAAEC,OAAO,EAAE,MAAM;MAAEC,QAAQ,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAS,CAAE;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnEhD,KAAA,CAAAsC,aAAA;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,wBAA0B,CAAC,eAE/BhD,KAAA,CAAAsC,aAAA;IACEW,IAAI,EAAC,MAAM;IACXC,MAAM,EAAC,SAAS;IAChBC,QAAQ,EAAGC,CAAC,IAAKvC,YAAY,CAACuC,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAE;IACjDf,KAAK,EAAE;MAAEgB,YAAY,EAAE;IAAO,CAAE;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACjC,CAAC,eACFhD,KAAA,CAAAsC,aAAA;IACEkB,WAAW,EAAC,sBAAsB;IAClCC,KAAK,EAAE/C,OAAQ;IACfyC,QAAQ,EAAGC,CAAC,IAAKzC,UAAU,CAACyC,CAAC,CAACC,MAAM,CAACI,KAAK,CAAE;IAC5CC,IAAI,EAAE,CAAE;IACRnB,KAAK,EAAE;MAAEoB,KAAK,EAAE,MAAM;MAAEJ,YAAY,EAAE,MAAM;MAAEf,OAAO,EAAE;IAAM,CAAE;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAChE,CAAC,eACFhD,KAAA,CAAAsC,aAAA;IACEsB,OAAO,EAAE1C,YAAa;IACtB2C,QAAQ,EAAE7C,OAAQ;IAClBuB,KAAK,EAAE;MACLC,OAAO,EAAE,WAAW;MACpBsB,MAAM,EAAE9C,OAAO,GAAG,aAAa,GAAG,SAAS;MAC3C+C,eAAe,EAAE,SAAS;MAC1BC,KAAK,EAAE,OAAO;MACdC,MAAM,EAAE,MAAM;MACdC,YAAY,EAAE;IAChB,CAAE;IAAAvB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEDhC,OAAO,GAAG,cAAc,GAAG,kBACtB,CAAC,eAEThB,KAAA,CAAAsC,aAAA;IAAIC,KAAK,EAAE;MAAEG,MAAM,EAAE;IAAS,CAAE;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAEnChD,KAAA,CAAAsC,aAAA;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,kBAAoB,CAAC,EACxBlC,OAAO,CAACqD,MAAM,KAAK,CAAC,iBAAInE,KAAA,CAAAsC,aAAA;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,0BAA2B,CAAC,EACvDlC,OAAO,CAACoB,GAAG,CAAEkC,MAAM,iBAClBpE,KAAA,CAAAsC,aAAA;IAAK+B,GAAG,EAAED,MAAM,CAAChC,EAAG;IAACG,KAAK,EAAE;MAC1BgB,YAAY,EAAE,MAAM;MACpBU,MAAM,EAAE,gBAAgB;MACxBC,YAAY,EAAE,KAAK;MACnB1B,OAAO,EAAE;IACX,CAAE;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACAhD,KAAA,CAAAsC,aAAA;IACEgC,GAAG,EAAEF,MAAM,CAAC7C,QAAS;IACrBgD,GAAG,EAAC,QAAQ;IACZhC,KAAK,EAAE;MACLoB,KAAK,EAAE,MAAM;MACba,SAAS,EAAE,OAAO;MAClBC,SAAS,EAAE,OAAO;MAClBP,YAAY,EAAE;IAChB,CAAE;IAAAvB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACH,CAAC,eACFhD,KAAA,CAAAsC,aAAA;IAAGC,KAAK,EAAE;MAAEmC,SAAS,EAAE;IAAO,CAAE;IAAA/B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9BhD,KAAA,CAAAsC,aAAA;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAQ,UAAgB,CAAC,KAAC,EAACoB,MAAM,CAAC1D,OACjC,CACA,CACN,CACE,CAAC;AAEV;AAEA,eAAeD,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module"}